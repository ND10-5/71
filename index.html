<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport"
 content="width=device-width,
initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#000000">
<title>FOR YOU‚ù§Ô∏è</title>
<link rel="preload" href="https://fonts.gstatic.com" as="font" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=block" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  background:black;
touch-action:none;
}
canvas{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  display:block;
 will-change: transform;

}
#start{
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  align-items: center;
  justify-content: center;
  color: pink;
  font-size: 22px;
  z-index: 10;
  cursor: pointer;
}
/* ===== LOVE PASSWORD STYLE ===== */
#lockScreen{
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,#ffd6e7,#fff0f6);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
  font-family:sans-serif;
  text-align:center;
  padding:30px;
}

.lockBox{
  background:white;
  padding:30px;
  border-radius:22px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
  max-width:320px;
}

.hint{
  font-size:15px;
  color:#555;
  line-height:1.6;
  margin:15px 0;
}

.hint span{
  color:#ff5c9f;
}

#loveInput{
  width:160px;
  height:42px;
  border-radius:12px;
  border:2px solid #ffb3cc;
  text-align:center;
  font-size:18px;
  margin-bottom:12px;
}

#unlockBtn{
  background:#ff4d88;
  color:white;
  border:none;
  padding:10px 22px;
  border-radius:12px;
}
#welcome{
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,#ffd6e7,#fff0f6);

  display:flex;
  justify-content:center;
  align-items:center;

  font-size:32px;
  font-weight:bold;
  color:#ff4d88;

  opacity:0;
pointer-events:none;
  transition:opacity 0.8s ease;
}

#welcome.show{
  opacity:1;
}
</style>
</head>

<body>
<!-- üíå LOVE PASSWORD -->
<div id="lockScreen">
  <div class="lockBox">
    <h2>M·∫≠t m√£ t√¨nh y√™u ‚ù§Ô∏è</h2>

    <p class="hint">
      L·∫ßn ƒë·∫ßu ti√™n ch√∫ng ta g·∫∑p nhau ·ªü s√¢n bay,<br>
      anh c√≤n nh·ªõ l√† ng√†y n√†o kh√¥ng?<br>
      <span>( nh·∫≠p d·∫°ng 01/01 nha üíó )</span>
    </p>

    <input id="loveInput" placeholder="__/__" maxlength="5" inputmode="numeric">

    <button id="unlockBtn">M·ªü kh√≥a</button>
  </div>
</div>
<div id="start">üíó Ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu üíó</div>
<div id="welcome">‚ù§Ô∏è Welcome my love ‚ù§Ô∏è</div>
<canvas id="canvas"></canvas>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let w, h;
const startScreen = document.getElementById("start");
const music = document.getElementById("music");
let stars = [];

function resizeCanvas(){
  const dpr = window.devicePixelRatio || 1;

  w = window.innerWidth;
  h = window.innerHeight;

  canvas.width = w * dpr;
  canvas.height = h * dpr;
  canvas.style.width = w + "px";
  canvas.style.height = h + "px";

  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
}
resizeCanvas();
createStars();

window.addEventListener("resize", ()=>{
  resizeCanvas();
  createStars(); // ‚≠ê t·∫°o l·∫°i khi xoay m√†n
});
let showFalling = false;
let showText = true;
let showHeart = false;
let time = 0;
let startTime = 0;
const HEART_TIME = 41.8;      // gi√¢y tim xu·∫•t hi·ªán
const FALL_TIME = 67.5;
const FADE_DURATION = 5; // m·ªù 3 gi√¢y
let colorTime = 0;
let pulse = 1;
let dkAlpha = 1;
// =====FALLING WORDS====
function shuffle(arr){
  for(let i = arr.length-1; i > 0; i--){
    let j = Math.floor(Math.random()*(i+1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}
const fallWords = [

"Love you","C·∫£m ∆°n anh","PND‚ù§Ô∏èQGK",
"Bae","Em y√™u anh",
"Only you","‚ù§Ô∏è",
"Y√™u anh","‚ù§Ô∏è","Th∆∞∆°ng anh ‚ù§Ô∏è",
"Choose you","My heart belongs to you","My love remains with you",
"Still you","M√£i ·ªü b√™n anh ‚ù§Ô∏è",
"Just us","C·∫£m ∆°n anh v√¨ ƒë√£ ƒë·∫øn",
"I love you", "14/02/2026",
"Miss you","‚ù§Ô∏è","L√† thi√™n v·ªã, l√† ∆∞u ti√™n, l√† duy nh·∫•t",
"No regrets",
"My heart","Anh b·∫£o v·ªá t·ªï qu·ªëc ‚ù§Ô∏è em b·∫£o v·ªá anh",
"Be mine ‚ù§Ô∏è","Under the same sky ‚ù§Ô∏è",
"Together","‚ù§Ô∏è","Em v·∫´n ·ªü ƒë√¢y","Ch·ªù anh v·ªÅ","Em nh·ªõ anh ‚ù§Ô∏è",
"Only us","Stay with me",
"Forever ‚ù§Ô∏è"];
// ===== FALLING WORDS FINAL ‚Äì NO FLASH ‚Äì STABLE =====

let fallingTexts = [];
let wordIndex = 0;

function createFalling(){

  fallingTexts = [];
  shuffle(fallWords);
  wordIndex = 0;

  const columns = Math.floor(w / 140); // th∆∞a nh·∫π
  const gapX = w / columns;

  const gapY = 280; // g·∫ßn h∆°n ch√∫t

  for(let i=0;i<columns;i++){

    const rows = Math.ceil(h / gapY) + 2;

    for(let j=0;j<rows;j++){

      let text = fallWords[wordIndex++ % fallWords.length];

      // ‚≠ê c√¢u d√†i v√†o gi·ªØa
      let len = text.length;
      let size = Math.min(Math.min(w,h)* 0.035,28);

      if(len > 16) size *= 0.85;
      if(len < 6) size *= 0.9;

      fallingTexts.push({
        text,

        col: i,
        x: i * gapX + gapX/2,

        y: -j * gapY - Math.random()*gapY,

        speed: 0.4 + Math.random()*0.2,

        size,

        baseAlpha: 0.6 + Math.random()*0.35,
alpha: 0
      });
    }
  }
}


function drawFalling(dt){

  ctx.shadowBlur = 0; // ‚≠ê QUAN TR·ªåNG: kh√¥ng glow ‚Üí kh√¥ng flash

  for(let f of fallingTexts){

    // ===== v·∫Ω =====
    ctx.font = "600 " + f.size + "px 'Playfair Display', serif";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    // ‚≠ê d√πng RGBA thay globalAlpha (fix flash 100%)
    ctx.fillStyle = `rgba(255,214,243,${f.alpha})`;

    ctx.fillText(f.text, f.x, f.y);

    // ===== r∆°i =====
    f.y += f.speed * dt;


    // ===== fade m∆∞·ª£t =====
    const fadeStart = h * 0.85;

    if(f.y > fadeStart){
      let p = (f.y - fadeStart) / (h - fadeStart);
      f.alpha = f.baseAlpha * (1 - p);
    }else{
      f.alpha = f.baseAlpha;
    }


    // ===== reset (KH√îNG random to√†n m√†n ‚Üí kh√¥ng d·ªìn ch·ªØ) =====
    if(f.y > h){

      f.y = -Math.random()*150;

      // ‚≠ê ch·ªâ l·ªách nh·∫π quanh c·ªôt
      const gapX = w / Math.floor(w/140);
      f.x = f.col * gapX + gapX/2 + (Math.random()-0.5)*18;

      f.text = fallWords[wordIndex++ % fallWords.length];

      f.alpha = f.baseAlpha;
    }
  }
}
function createStars(){

  stars = [];

  let count = Math.floor((w * h) / 9000); 
  // ‚≠ê s·ªë c√†ng nh·ªè ‚Üí c√†ng nhi·ªÅu sao
  // 9000 = v·ª´a ƒë·∫πp mobile
  // 7000 = d√†y h∆°n
  // 5000 = r·∫•t d√†y (lung linh)

  for(let i=0;i<count;i++){
    stars.push({
      x: Math.random()*w,
      y: Math.random()*h,
      r: Math.random()*1.8+0.4,
      v: Math.random()*0.6+0.2,
      phase: Math.random()*Math.PI*2,
      speed: 0.02 + Math.random()*0.03
    });
  }
}
// ===== TEXT =====
const messages = [
  "M·ªôt b·∫ßu tr·ªùi ƒë·∫ßy sao l·∫•p l√°nh...",
"ƒê√¢y l√† m√≥n qu√† nh·ªè",
"Em mu·ªën d√†nh ri√™ng cho anh",
"Gi·ªØa ng√¢n h√† v√¥ t·∫≠n ·∫•y",
"Ch·ªâ c√≥ tr√°i tim em v√¨ anh m√† t·ªèa s√°ng",
"L·∫ßn n√†y, em ƒë√£ c√≥ th·ªÉ ng·∫Øm sao c√πng anh r·ªìi",
"Nh·ªØng v√¨ sao do ch√≠nh tay em t·∫°o ra",
"Mang theo t·∫•t c·∫£ y√™u th∆∞∆°ng em mu·ªën g·ª≠i ƒë·∫øn anh",
"Trong kho·∫£nh kh·∫Øc n√†y,",
"Ch·ªâ c√≥ tr√°i tim v√† b·∫ßu tr·ªùi ·∫•y",
"Kho·∫£ng c√°ch d∆∞·ªùng nh∆∞ tan bi·∫øn",
"V√† ch√∫ng ta m√£i ·ªü b√™n nhau",
"No matter the distance between us,",
"My heart will always find you under the same sky. ‚ù§Ô∏è"
  ];
let textIndex = 0;
let textAlpha = 0;


// ===== HEART =====
let particles = [];
function heart(t){
  return {
    x: 16 * Math.pow(Math.sin(t),3),
    y: 13*Math.cos(t)
      -5*Math.cos(2*t)
      -2*Math.cos(3*t)
      -Math.cos(4*t)
  };
}

function createHeart(){
  particles = [];
  for(let t=0;t<Math.PI*2;t+=0.06){
    let p = heart(t);
if (Math.abs(p.x) < 6 && Math.abs(p.y) < 6) continue;


for(let i=0;i<8;i++){
let spread = Math.random()*3;
      particles.push({
        baseX: p.x + (Math.random()-0.5)*spread,
        baseY: p.y + (Math.random()-0.5)*spread,
        offset: Math.random()*Math.PI*2,
        rise: Math.random()*h,
        alpha: Math.random()*0.4 + 0.5,
        size: Math.random()*6 + 3
      });
    }
  }

}

// ===== DRAW =====
let lastTime = 0;
function draw(now){
let dt = (now - lastTime) / 16.6;
lastTime = now;
let t = (performance.now() - startTime) / 1000;
if (!dt || dt > 3) dt = 1;
    // n·ªÅn
  ctx.fillStyle="black";
  ctx.fillRect(0,0,w,h);

  // sao
  // sao
for(let s of stars){

  s.y += s.v * dt;
  if(s.y > h) s.y = 0;

  s.phase += s.speed;

  let twinkle = Math.sin(s.phase) * 0.7 + 0.7;
       // ‚≠ê th√™m glow NGAY TR∆Ø·ªöC khi fill
    ctx.fillStyle = `rgba(255,255,255,${twinkle})`;
  ctx.beginPath();
  ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
  ctx.fill();
}

ctx.shadowBlur = 0; // ‚≠ê reset SAU v√≤ng l·∫∑p (r·∫•t quan tr·ªçng)
  

  // ===== TEXT INTRO =====
  // ===== TEXT INTRO (SYNC THEO NH·∫†C) =====
if(showText){
  const totalDuration = HEART_TIME; // th∆∞ ch·∫°y t·ªõi 41s
  const perLine = totalDuration / messages.length;

  textIndex = Math.floor(t / perLine);

  if(textIndex >= messages.length){
    textIndex = messages.length - 1;
  }

  let local = (t % perLine) / perLine;
  textAlpha = Math.sin(local * Math.PI);

  ctx.fillStyle = `rgba(255,210,220,${textAlpha})`;
  ctx.font = "25px 'Playfair Display'";
  ctx.textAlign = "center";

  ctx.shadowBlur = 8;
  ctx.shadowColor = "#ffb6e6";

  ctx.fillText(messages[textIndex], w/2, h/2);

  ctx.shadowBlur = 0;
}

  // ===== HEART =====
  if(showHeart){
const heartStart = HEART_TIME;   // 41
const heartEnd = FALL_TIME;      // 82

let fadeStart = heartEnd - FADE_DURATION;

if(t < fadeStart){
  dkAlpha = 1; // hi·ªán full
}else{
  dkAlpha = 1 - (t - fadeStart) / FADE_DURATION;
}

dkAlpha = Math.max(0, Math.min(1, dkAlpha));
time += 0.04 * dt;
        colorTime += 0.02 * dt;

    pulse = 1 + Math.sin(time)*0.07;

    let cx = w/2;
    let cy = h/2;
ctx.shadowBlur = 4;
ctx.shadowColor = "rgba(255,120,180,0.9)";
    for(let p of particles){
      p.offset += 0.06 * dt;
      if(p.rise > 0) p.rise -= 0.5 * dt;

      let x = cx + p.baseX*7*pulse + Math.cos(p.offset)*1.2;
      let y = cy - p.baseY*7*pulse + Math.sin(p.offset)*1.2 + p.rise;

      let r = 255 + Math.sin(colorTime)*35;
let g = 130 + Math.sin(colorTime+2)*40;
      let b = 180 + Math.sin(colorTime+4)*40;

let fade = Math.abs(p.baseY) - 8;
fade = Math.max(0, Math.min(fade / 10, 1));

// tƒÉng s√°ng ph·∫ßn gi·ªØa
let brightnessBoost = 0.9;

let finalAlpha = Math.min( p.alpha * brightnessBoost * (1 - fade * 0.6),1);

ctx.fillStyle = `rgba(${r},${g},${b},${finalAlpha})`;
      ctx.beginPath();
      ctx.arc(x,y,p.size*0.4,0,Math.PI*2);
      ctx.fill();
    }

    // ===== CENTER TEXT (T·ª∞ BI·∫æN M·∫§T) =====
if (dkAlpha > 0) {
  ctx.globalAlpha = dkAlpha;

ctx.save();
ctx.translate(cx, cy);
ctx.scale(pulse, pulse);

ctx.font = "18px 'Great Vibes',cursive";
ctx.textAlign = "center";
ctx.textBaseline = "middle";
ctx.fillStyle = "rgba(255,200,220,1)";
ctx.fillText("Happy Valentine's Day", 0, 0);

ctx.restore();

ctx.globalAlpha = 1;
 }
if(dkAlpha <= 0 && !showFalling){   // ‚≠ê khi text bi·∫øn m·∫•t
    showFalling = true;
    createFalling();
  }
}

// ‚≠ê v·∫Ω ch·ªØ r∆°i
if(showFalling){
  drawFalling(dt);
}
// ===== SYNC THEO TIME TH·ª∞C (KH√îNG D√ôNG NH·∫†C) =====
if(t >= HEART_TIME && !showHeart){
  showText = false;
  showHeart = true;
  createHeart();
}

if(t >= FALL_TIME && !showFalling){
  showFalling = true;
  createFalling();
}
requestAnimationFrame(draw);
}
// ===== START =====
startScreen.addEventListener("click", async ()=> {
startTime = performance.now(); // ‚≠ê reset th·ªùi gian khi b·∫Øt ƒë·∫ßu
  startScreen.style.display = "none";

  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen();
  }

  music.play();
  // ‚≠ê ƒê·ª¢I FONT LOAD XONG HO√ÄN TO√ÄN
  await document.fonts.load("18px Great Vibes");
await document.fonts.load("25px Playfair Display");
  // ‚≠ê √©p browser cache font tr∆∞·ªõc 1 l·∫ßn
  ctx.font = "20px 'Great Vibes'";
ctx.fillText(" ", 0, 0);

ctx.font = "25px 'Playfair Display'";
ctx.fillText(" ", 0, 0);
 requestAnimationFrame(draw);});
/* ===== LOVE PASSWORD LOGIC UPGRADE ===== */

const correctAnswer = "27/02"; // üëâ ƒë·ªïi ng√†y ·ªü ƒë√¢y

const lock = document.getElementById("lockScreen");
const startDiv = document.getElementById("start");
const input = document.getElementById("loveInput");
const btn = document.getElementById("unlockBtn");
const welcome = document.getElementById("welcome");

startDiv.style.display = "none";

/* ‚≠ê T·ª∞ TH√äM D·∫§U / */
input.addEventListener("input", () => {
  let numbers = input.value.replace(/\D/g,"").slice(0,4);

  if(numbers.length > 2){
    input.value = numbers.slice(0,2) + "/" + numbers.slice(2);
  }else{
    input.value = numbers;
  }
});
/* ‚≠ê M·ªû KH√ìA */
btn.onclick = ()=>{
  if(input.value === correctAnswer){

    lock.style.display = "none";
setTimeout(()=>{
  welcome.classList.add("show"); // fade in
},10);

setTimeout(()=>{
  welcome.classList.remove("show");

  setTimeout(()=>{

    welcome.style.display = "none";
    startDiv.style.display = "flex"; // ‚≠ê hi·ªán n√∫t ch·∫°m

  },800);

},5000);
}
};
/* nh·∫•n Enter c≈©ng m·ªü */
input.addEventListener("keydown",(e)=>{
  if(e.key === "Enter") btn.click();
});
</script>

</body>
</html>